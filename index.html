<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BENTO SECURITY | Catálogo</title>
    <style>
        body { background: #0a0a0a; color: white; font-family: 'Montserrat', sans-serif; margin: 0; }
        .header { text-align: center; padding: 40px; border-bottom: 2px solid #ff6600; }
        .filtros { display: flex; justify-content: center; gap: 10px; margin: 20px 0; flex-wrap: wrap; }
        
        button { 
            background: transparent; border: 1px solid #333; color: #888; 
            padding: 10px 20px; cursor: pointer; text-transform: uppercase; 
            transition: 0.3s; font-size: 12px;
        }
        button:hover, button.active { border-color: #ff6600; color: white; background: rgba(255, 102, 0, 0.1); }
        
        #contenedor-productos { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
            gap: 20px; padding: 20px; max-width: 1200px; margin: 0 auto;
        }
        .card { background: #111; border: 1px solid #222; padding: 15px; border-radius: 10px; text-align: center; }
        .card img { max-width: 100%; border-radius: 5px; height: 200px; object-fit: cover; }
        .card h3 { color: #ff6600; margin: 15px 0 5px; }
        .card p { font-size: 14px; color: #aaa; }
        .status-msg { text-align: center; margin: 50px; color: #888; font-style: italic; }
    </style>
</head>
<body>

    <div class="header">
        <h1>EXCELENCIA EN <span style="color:#ff6600">SEGURIDAD</span></h1>
        <p>PROTECCIÓN AVANZADA PARA INFRAESTRUCTURAS CRÍTICAS</p>
    </div>

    <div class="filtros">
        <button class="active" onclick="filtrar('todos', this)">Catálogo Completo</button>
        <button onclick="filtrar('camaras', this)">Cámaras</button>
        <button onclick="filtrar('alarmas', this)">Alarmas</button>
        <button onclick="filtrar('grabacion', this)">DVR/NVR</button>
        <button onclick="filtrar('Accesorios', this)">Accesorios</button>
        <button onclick="filtrar('controlesdeacceso', this)">Controles de Acceso</button>
    </div>

    <div id="contenedor-productos">
        <p class="status-msg">Iniciando conexión segura con BENTO DB...</p>
    </div>

    <script>
        let productosData = []; 

     
        async function obtenerProductos() {
            const contenedor = document.getElementById('contenedor-productos');
            try {
                const res = await fetch('https://bento-seguridad-prueba-1.onrender.com/api/productos');
                productosData = await res.json();
                
                if(productosData.length === 0) {
                    contenedor.innerHTML = '<p class="status-msg">No hay productos disponibles por ahora.</p>';
                } else {
                    mostrarProductos(productosData);
                }
            } catch (error) {
                contenedor.innerHTML = '<p class="status-msg">Error al conectar con la base de datos. Intentá refrescar.</p>';
            }
        }

  
        function mostrarProductos(lista) {
            const contenedor = document.getElementById('contenedor-productos');
            contenedor.innerHTML = ''; 

            lista.forEach(prod => {
                const card = `
                    <div class="card">
                        <img src="img/${prod.imagen}" alt="${prod.nombre}" onerror="this.src='img/placeholder.jpg'">
                        <small style="color:#ff6600">${prod.etiqueta || 'Nuevo'}</small>
                        <h3>${prod.nombre}</h3>
                        <p>${prod.descripcion}</p>
                    </div>
                `;
                contenedor.innerHTML += card;
            });
        }

        
        function filtrar(categoria, btn) {
            
            document.querySelectorAll('.filtros button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            if (categoria === 'todos') {
                mostrarProductos(productosData);
            } else {
                const filtrados = productosData.filter(p => p.categoria.toLowerCase() === categoria.toLowerCase());
                if(filtrados.length === 0) {
                    document.getElementById('contenedor-productos').innerHTML = '<p class="status-msg">No hay productos en esta categoría todavía.</p>';
                } else {
                    mostrarProductos(filtrados);
                }
            }
        }

  
        obtenerProductos();
    </script>
</body>
</html>
